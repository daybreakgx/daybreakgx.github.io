---
layout: post
title: "C++ primer 读书笔记"
categories: c++
tags: c++
---

* content
{:toc}

## 变量和基本类型

* 字符型被分成了三种: `char`/`signed char`/`unsigned char`。尽管字符型有三种，但是字符的表现形式确只有两种: 带符号和无符号的。类型`char`具体表现为上述两种形式的哪一个，是由编译器决定的。
  因为类型char在一些机器上是有符号的，在另外一些机器上又是无符号的，所以如果使用`char`进行算数运算特别容易出问题，如果需要使用一个不大的整数时，那么明确指定它的类型是`signed char`或`unsigned char`。

* 执行浮点运算时通常使用`double`，这是因为`float`通常精度不够而且双精度浮点数和单精度浮点数的计算代价相差无几。事实上，对于某些机器来说，双精度运算甚至比单精度运算还快。

###### 强制类型转换

* 把一个浮点数赋给整数类型时，仅保留浮点数中小数点之前的部分。

* 把一个整数赋给浮点数类型时，小数部分记为0。如果该整数所占的空间超过了浮点类型的容量，精度可能有损失。

* 赋给无符号类型一个超出它表示范围的值时，结果时初始值对无符号类型表示数值总数取模后的余数。

* 赋给有符号类型一个超出它表示范围的值时，结果时未定义的（undefined）。程序可能继续工作，可能崩溃，也可能生成垃圾数据。

      int i = 3.14;             //i的值为3
      double pi = 3;            //pi的值为3.0
      unsigned char c = -1;     //假设char占8bits，c的值为255
      signed char c2 = 256;     //假设char占8bits, c2的值是未定义的

* 当一个算术表达式中既有无符号数又有带符号数时，带符号数会转换为无符号数，编程时要尽量避免这种情况发生。因为带符号数为负数时，可能会出现不是我们所期望的结果

###### 字面值常量

* 一个形如 `52` 、 `'a'` 、 `"Hello"` 、 `3.14L` 、 `99LL` 、 `u8"hi!"` 的值被称为字面值常量(literal)。每个字面值常量都对应一种数据类型，字面值常量的形式（前缀/后缀）和值大小决定了它的数据类型。

* 字符和字符串字面值

  由单引号括起来的一个字符称为`char`型字面值
  双括号括起来的零个或多个字符则构成字符串字面值

    前缀 | 含义 | 类型
    --- | --- | ---
    u | Unicode 16 字符 | `char16_t`
    U | Unicode 32 字符 | `char32_t`
    L | 宽字符 | `wchar_t`
    u8 | UTF-8(仅用于字符串字面常量) | `char`


* 整型字面值

  默认情况下，十进制不带后缀的整数字面值是带符号数，它的类型时`int`/`long`/`long long`中能容纳它大小的最小的那个。
  八进制和十六进制不带后缀的整数字面值可能是带符号数，也可能时无符号数，它的类型是`int`/`unsigned int`/`long`/`unsigned long`/`long long`/`unsigned long long`中尺寸最小者。
  类型`short`没有对应的字面值。


    后缀 | 最小匹配类型
    --- | ---
    u or U | `unsigned`
    l or L | `long`
    ll or LL | `long long`


* 浮点型字面值

  默认的，浮点型字面值是一个`double`。


    后缀 | 类型
    --- | ---
    f or F | `float`
    l or L | `long double`


* 布尔字面值

  `true` 和 `false` 是布尔类型的字面值

* 指针字面值

  `nullptr`是指针字面值
 

###### 泛化的转义序列

* 形式为`\x`后紧跟1个或多个十六进制数字，或者`\`后紧跟1个、2个或3个八进制数字，其中数字部分表示的是字符对应的数值。

    `\12` (换行符）`\115` (字符M) `\x4d` (字符M)


      std::cout << "Hi, \x4d-O-\155!\n";    //输出: Hi, M-O-M! 然后换行


  如果反斜线 `\` 后面跟着的八进制数超过3个，只有前3个跟 `\` 构成转义序列。
  相反，`\x` 要用到后面跟着的所有数字，例如，`\x1234` 表示一个16位的字符，该字符由这4个十六进制数所对应的比特唯一确定。因为大多数机器的char型数据都是占8位，所以上面这个例子可能会报错。一般来说，超过8位的十六进制字符都是与前面的字符与字符串字面值表中的某个前缀作为开头的扩展字符集一起使用的。 


